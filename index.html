<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åºŠç·¨æ•…äº‹å®‡å®™è§’è‰²è¨ºæ–·å®¤</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        body {
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            background-color: #ffd700; /* èƒŒæ™¯é»ƒè‰² */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            position: relative; /* ç‚ºäº†æ”¾ç½®æ‡¸æµ®æŒ‰éˆ• */
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 10px 10px 0px rgba(0,0,0,1); /* é»‘è‰²ç¡¬é™°å½±ï¼Œæ›´ç¾æ¼«é¢¨æ ¼ */
            max-width: 500px;
            width: 100%;
            text-align: center;
            border: 4px solid #000;
        }
        h1 { color: #000; margin-bottom: 5px; font-weight: 900; font-size: 28px; }
        .subtitle { color: #d32f2f; font-weight: bold; margin-bottom: 30px; font-size: 18px; }
        
        /* æ‡¸æµ®çš„ YouTube æŒ‰éˆ• (ç§»å‡ºä¸»å€å¡Š) */
        .floating-yt-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #ff0000;
            color: white;
            padding: 15px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            border: 3px solid #000;
            box-shadow: 3px 3px 0px #000;
            transition: transform 0.2s;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .floating-yt-btn:hover {
            transform: scale(1.05);
            background-color: #cc0000;
        }

        /* æ¸¬é©—é¸é …æŒ‰éˆ• */
        .btn {
            background-color: #fff;
            color: #000;
            border: 3px solid #000;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 5px 5px 0px #aaa;
            transition: all 0.1s;
            margin: 10px 0;
            width: 100%;
            text-align: left;
            position: relative;
        }
        .btn:hover { background-color: #f0f0f0; transform: translate(-2px, -2px); box-shadow: 7px 7px 0px #aaa; }
        .btn:active { transform: translate(2px, 2px); box-shadow: 1px 1px 0px #333; }
        
        .action-btn {
            background-color: #ff5252;
            color: white;
            text-align: center;
            box-shadow: 4px 4px 0px #000;
        }
        .action-btn:hover { background-color: #ff1744; }

        .hidden { display: none; }
        
        /* é€²åº¦æ¢ */
        .progress-bar {
            width: 100%;
            height: 15px;
            background-color: #fff;
            border: 2px solid #000;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #32cd32;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* çµæœå€å¡Š (æˆªåœ–ç¯„åœ) */
        #capture-area {
            background: white;
            padding: 20px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .result-img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
            border: 4px solid #000;
            margin: 15px auto;
            background-color: #eee;
        }
        /* éš±è—çš„æ•¸å€¼å€å¡Š */
        .stat-box {
            display: none; 
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border: 2px solid #000;
            text-align: left;
            font-family: monospace;
            font-size: 1.1em;
        }
        .result-title {
            font-size: 32px;
            font-weight: 900;
            color: #d32f2f;
            text-shadow: 1px 1px 0px #000;
            margin: 10px 0;
        }

        /* åœ–ç‰‡ç”Ÿæˆå¾Œçš„å½ˆçª— */
        #generated-image-container {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #generated-image-container img {
            max-width: 90%;
            max-height: 80%;
            border: 5px solid white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .close-btn {
            color: white;
            font-size: 18px;
            margin-top: 15px;
            cursor: pointer;
            padding: 10px 20px;
            background: #333;
            border-radius: 50px;
        }
    </style>
</head>
<body>

<a href="https://www.youtube.com/@%E5%BA%8A%E7%B7%A8%E6%95%85%E4%BA%8BBadTimeStories" target="_blank" class="floating-yt-btn">
    ğŸ“º è¨‚é–±é »é“
</a>

<div class="container" id="start-screen">
    <h1>åºŠç·¨æ•…äº‹å®‡å®™<br>è§’è‰²è¨ºæ–·å®¤</h1>
    <p class="subtitle">æ¸¬æ¸¬çœ‹ä½ åœ¨åºŠç·¨å®‡å®™è£¡æ˜¯èª°ï¼</p>
    
    <div style="margin: 30px 0;">
        <img src="https://via.placeholder.com/150?text=QUIZ" alt="Logo" style="border-radius:50%; border:3px solid #000;">
    </div>
    
    <button class="btn action-btn" onclick="startQuiz()">ğŸ”¥ é–‹å§‹è¨ºæ–· ğŸ”¥</button>
</div>

<div class="container hidden" id="quiz-screen">
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
    <h2 id="question-text" style="font-size:1.3em; margin-bottom: 20px;">å•é¡Œè¼‰å…¥ä¸­...</h2>
    <div id="options-container"></div>
</div>

<div class="container hidden" id="result-screen">
    <div id="capture-area">
        <h3 style="margin:0; color:#555;">ä½ çš„éˆé­‚è§’è‰²æ˜¯ï¼š</h3>
        <div class="result-title" id="result-name"></div>
        
        <img id="result-image" class="result-img" src="" alt="è§’è‰²åœ–ç‰‡">
        
        <p id="result-desc" style="font-size: 1.1em; font-weight: bold; line-height: 1.6; color:#333;"></p>
        
        <div class="stat-box">
            <div>âœ¨ é­…åŠ›ï¼š<span id="score-charm"></span></div>
            <div>ğŸ§  æ™ºåŠ›ï¼š<span id="score-intellect"></span></div>
            <div>ğŸ˜ˆ å¿ƒæ©Ÿï¼š<span id="score-scheming"></span></div>
            <div>ğŸ¤ª ç˜‹ç‹‚ï¼š<span id="score-abnormal"></span></div>
        </div>
        <p style="margin-top:10px; font-size:0.8em; color:#999;">#åºŠç·¨æ•…äº‹å®‡å®™è§’è‰²è¨ºæ–·å®¤</p>
    </div>

    <button class="btn action-btn" onclick="generateImage()" style="background-color: #4CAF50;">ğŸ“¸ ç”¢ç”Ÿçµæœåœ– (é•·æŒ‰å„²å­˜)</button>
    <button class="btn action-btn" onclick="location.reload()" style="background-color: #607d8b;">ğŸ”„ å†æ¸¬ä¸€æ¬¡</button>
</div>

<div id="generated-image-container">
    <p style="color: #fff; font-weight: bold; font-size:1.2em;">ğŸ‘‡ é•·æŒ‰åœ–ç‰‡å³å¯å„²å­˜ ğŸ‘‡</p>
    <img id="final-image" src="" />
    <div class="close-btn" onclick="closeImageModal()">é—œé–‰è¦–çª—</div>
</div>

<script>
    // === è§’è‰²è³‡æ–™ï¼šå·²æ›´æ–°çµèªä¸¦ç¸®çŸ­é•·åç¨± ===
    const characters = [
        { name: "å°é›æ±", stats: [10, 3, 1, 8], desc: "é›–ç„¶è…¦è¢‹ç©ºç©ºï¼Œä½†é€™æ­£æ˜¯ä½ çš„é­…åŠ›æ‰€åœ¨ï¼ç”¨æ‹æ“Šæ¢ç´¢é€™å€‹ä¸–ç•Œå§ï¼", image: "https://drive.google.com/file/d/1X9JNyslflFpcZCipEOvcTmtmd2v9DE-j/view?usp=drive_link" },
        { name: "é›çˆ¸", stats: [6, 5, 4, 3], desc: "è¡¨é¢ä¸Šæ˜¯å€‹æ­£å¸¸äººï¼Œä½†å…§å¿ƒæ·±è™•è—è‘—ä¸€å€‹ç‹‚é‡çš„æ–æ»¾éˆé­‚ (é‚„æœ‰ç§æˆ¿éŒ¢)", image: "https://drive.google.com/file/d/1j39hx83MmA7RGjsLG5i05-WzwbCR0KrX/view?usp=drive_link" },
        { name: "é›åª½", stats: [7, 8, 7, 3], desc: "ä½ æ˜¯å®¶è£¡çš„åœ°ä¸‹å¸ä»¤å®˜ï¼ŒæŒæ¡æ‰€æœ‰æƒ…å ±èˆ‡ç®—è¨ˆï¼Œæ²’äººæ•¢åœ¨ä½ é¢å‰é€ æ¬¡ï¼", image: "https://drive.google.com/file/d/1XQDML8-V5Gcl1573yMWXHtZb_YFP0GPT/view?usp=drive_link" },
        { name: "é›å‹•å¦¹", stats: [7, 6, 8, 6], desc: "ä½ çš„èªé€Ÿæ¯”å¤§è…¦å‹•çš„é‚„å¿«ï¼Œæƒ…ç·’èµ·ä¼æ¯”é›²éœ„é£›è»Šå¤§ï¼Œæ´»è‘—å°±æ˜¯ä¸€å ´è¯éº—çš„å…«é»æª”ï¼", image: "https://drive.google.com/file/d/1Vh6MEQg4FWMzMPjmlob5yTbxNcvjs5uu/view?usp=drive_link" },
        { name: "å°ç‹—", stats: [5, 1, 2, 8], desc: "åªè¦æœ‰é£¯åƒï¼Œä½ å°±æ˜¯å…¨ä¸–ç•Œæœ€å¿«æ¨‚çš„ç”Ÿç‰©ã€‚å¿ èª åº¦ 100%ï¼Œæ™ºå•†...æˆ‘å€‘å…ˆä¸è«‡é€™å€‹ã€‚", image: "https://drive.google.com/file/d/19-4PCtxIgp__w9wV76HKnp7sU6pRQKEa/view?usp=drive_link" },
        { name: "å°ç†Š", stats: [4, 2, 7, 7], desc: "ä½ çœ‹èµ·ä¾†ç„¡å®³ï¼Œå…¶å¯¦æ»¿è…¦å­å¥‡æ€ªçš„æƒ³æ³•ã€‚æ˜¯å€‹ç¨±è·çš„æå‹ï¼Œå¶çˆ¾æœƒè®Šæ…‹ä¸€ä¸‹ã€‚", image: "https://drive.google.com/file/d/1VsAFpxqxZzz2oPogMpnr2RYhI_Rgw3H-/view?usp=drive_link" },
        { name: "å°è±¬", stats: [2, 9, 6, 2], desc: "åœ¨ä¸€ç¾¤ç˜‹å­è£¡é¢ï¼Œä½ æ˜¯å”¯ä¸€çš„æ­£å¸¸äººã€‚è¾›è‹¦ä½ äº†ï¼Œè² è²¬æ”¶æ‹¾çˆ›æ”¤å­çš„æ™ºå›Šæ“”ç•¶ã€‚", image: "https://drive.google.com/file/d/1U6hBm8YOeXRdW7BADu9aIL6_D1128Bf_/view?usp=drive_link" },
        { name: "æ¿€ç™½ç‹¼", stats: [8, 5, 9, 5], desc: "é›–ç„¶ä½ å¾ˆæœ‰éŒ¢åˆæœ‰å“å‘³ï¼Œä½†è¬›è©±çœŸçš„å¥½æ©Ÿè»Šã€‚äº«å—è¢«äººè¨å­çš„å¿«æ„Ÿå—ï¼Ÿ", image: "https://drive.google.com/file/d/1CY48MHn0EGuQFDenREtm-p_1asTZdkxz/view?usp=drive_link" },
        { name: "å°å’ª", stats: [9, 7, 3, 2], desc: "å„ªé›…ã€æ½”ç™–ã€é«˜è²´ã€‚çœ‹è‘—é€™ç¾¤é«’æ±è¥¿ï¼Œä½ çš„çœ¼ç¥å……æ»¿äº†æ…ˆæ‚²çš„é„™è¦–ã€‚", image: "https://drive.google.com/file/d/1nz2qPxFZp-cnBHY4vbAZcV4Kk63Ot2kF/view?usp=drive_link" },
        { name: "ç­ç“œ", stats: [5, 4, 2, 3], desc: "ç‚ºä»€éº¼å—å‚·çš„ç¸½æ˜¯ä½ ï¼Ÿé›–ç„¶è†½å°åˆæ„›å«ï¼Œä½†ä¹Ÿæ˜¯åœ˜é«”ä¸­ä¸å¯æˆ–ç¼ºçš„å‘†ç“œã€‚", image: "https://drive.google.com/file/d/1rI4qT5wfC5A6dliMzuT8AgK4nNBs1Iiz/view?usp=drive_link" },
        { name: "ç­èƒ–", stats: [2, 2, 2, 7], desc: "ä½ çš„å­˜åœ¨æ„Ÿå»ºç«‹åœ¨åæ§½åˆ¥äººä¸Šï¼Œé›–ç„¶æ²’ä»€éº¼ä¸»è¦‹ï¼Œä½†å¾ˆéš¨å’Œå•¦ã€‚", image: "https://drive.google.com/file/d/1mqcSdxJvMKeH4FbYYIqKjyczySLjscHB/view?usp=drive_link" },
        { name: "ç­ä¹¾", stats: [3, 3, 3, 7], desc: "å˜´å·´æ¯”èº«é«”èª å¯¦ï¼Œæ˜æ˜æƒ³åŠ å…¥å¤§å®¶å»ç¸½æ˜¯ç”¨é…¸è¨€é…¸èªä¾†åˆ·å­˜åœ¨æ„Ÿã€‚", image: "https://drive.google.com/file/d/1qtoZCqbEo_t-60lIGlQrZN1yaU-4bl0X/view?usp=drive_link" },
        { name: "ç­ä¸­å±±", stats: [8, 6, 4, 3], desc: "äººå°é¬¼å¤§ï¼Œç”¨æœ€ç„¡è¾œçš„è‡‰èªªå‡ºæœ€å¯æ€•çš„è©±ï¼Œå°‡ä¾†å¿…æˆå¤§å™¨(æˆ–å¤§åæ´¾)ã€‚", image: "https://drive.google.com/file/d/1Zgypz-EyB0Hlzk0RBCezBsgRdMbnA0_8/view?usp=drive_link" },
        { name: "ç­å…‹é‡Œæ–¯å¤šå¤«", stats: [6, 9, 6, 9], desc: "ä½ çš„ä¸–ç•Œå¤ªæ·±å¥§äº†ï¼Œå‡¡äººç„¡æ³•ç†è§£ã€‚æ²‰é»˜å¯¡è¨€æ˜¯å› ç‚ºä½ åœ¨è·Ÿå®‡å®™é€£ç·šã€‚", image: "https://drive.google.com/file/d/1he__N-76sjKWKIgQ7s-aMCOwNpfU9IXp/view?usp=drive_link" }, // ç¸®çŸ­åç¨±ä»¥ç¢ºä¿ç©©å®š
        { name: "ç«¹é¼ ", stats: [4, 6, 7, 6], desc: "ä¸­æš‘äº†å—ï¼Ÿä¸å¦‚...å˜¿å˜¿å˜¿ã€‚ä½ çš„æ€è€ƒé‚è¼¯ç°¡å–®ç²—æš´ï¼Œå°±æ˜¯ã€Œåƒã€èˆ‡ã€Œè¢«åƒã€ã€‚", image: "https://drive.google.com/file/d/1OSf5LviLva5IGNnjozX2vk605wBz_c2w/view?usp=drive_link" },
        { name: "è›¤èœŠç²¾", stats: [3, 6, 10, 10], desc: "çœ‹åˆ°å¤§å®¶é€™éº¼é–‹å¿ƒï¼Œä½ å°±è¦ºå¾—æ¸¾èº«ä¸å°å‹ï¼Œåªæƒ³è©›å’’åˆ¥äººï¼", image: "https://drive.google.com/file/d/1TL0utjEHs6SrYfJ-PnxfyvNfBzyoXqEM/view?usp=drive_link" },
        { name: "äººåƒå°å¸«", stats: [6, 10, 8, 10], desc: "ä½ èªªçš„è©±æ²’äººè½å¾—æ‡‚ï¼Œä½†æ„Ÿè¦ºå¥½å²å®³ã€‚äº«å—è¢«è†œæ‹œçš„å¿«æ„Ÿï¼Œé›–ç„¶å…¶å¯¦éƒ½åœ¨èƒ¡æ‰¯ã€‚", image: "https://drive.google.com/file/d/1i40gKNeAwzYhvimfyVDTdoyVL6Fjo06i/view?usp=drive_link" },
        { name: "è˜¿è””å°ç”Ÿ", stats: [5, 6, 3, 8], desc: "æ²’æœ‰è‡ªæˆ‘ï¼Œéš¨æ³¢é€æµã€‚å°å¸«èªªå¤§ä¾¿æ˜¯é¦™çš„ï¼Œä½ ä¹Ÿæœƒé»é ­èªªè®šã€‚", image: "https://drive.google.com/file/d/1qJ7tGA028OpYldbotFzoAPo-PQHPuvJi/view?usp=drive_link" },
        { name: "ç´…æ©Ÿè»Š", stats: [1, 4, 6, 3], desc: "ä½ å·²ç¶“æ”¾æ£„æ²»ç™‚äº†ã€‚ç”Ÿæ´»ç¿’æ…£æ¥µå·®ï¼Œå˜´å·´(æ’æ°£ç®¡)æ¥µè‡­ï¼Œä½†æ´»å¾—éå¸¸è‡ªåœ¨ã€‚", image: "https://drive.google.com/file/d/1C7lfPi1vkrIy6jbWeS6Vw3rLoRuJ0mjN/view?usp=drive_link" },
        { name: "åºŠç·¨", stats: [7, 6, 9, 8], desc: "å‰µé€ é€™ä¸€åˆ‡æ··äº‚çš„å§‹ä½œä¿‘è€…ã€‚é›†è®Šæ…‹ã€å‰µæ„èˆ‡è²ªå©ªæ–¼ä¸€èº«çš„ç¥...ç¶“ç—…ã€‚", image: "https://drive.google.com/file/d/1jL5QJa68H27P81SM1pVPuOa93xHytoie/view?usp=drive_link" },
        { name: "è–¯ç‰‡", stats: [8, 9, 3, 6], desc: "æ²™ç™¼é¦¬éˆ´è–¯çš„æ¥µè‡´ã€‚åªè¦æœ‰ç•°æ€§åœ¨ï¼Œä½ å¯ä»¥ç¬é–“å¾å»¢ç‰©è®Šæˆè¶…äººã€‚", image: "https://drive.google.com/file/d/1h0tWNfCqCD-oEQASGdTs_04eUzHRe2Ol/view?usp=drive_link" },
        { name: "è‡å…”å›", stats: [9, 4, 1, 10], desc: "ä½ çš„è…¦è¿´è·¯æ˜¯è¿·å®®ã€‚æ²’äººçŸ¥é“ä½ ä¸‹ä¸€ç§’æœƒè·³å»å“ªï¼ŒåŒ…æ‹¬ä½ è‡ªå·±ã€‚", image: "https://drive.google.com/file/d/1q3mIxX2pYiKiXd2eIRXZZRC2b_DWKNAR/view?usp=drive_link" },
        { name: "è‡ç‹—", stats: [7, 10, 1, 7], desc: "é¢ç™±é«˜æ‰‹ã€‚å…§å¿ƒæˆ²å¾ˆå¤šï¼Œä½†å¤–è¡¨æ¯«ç„¡æ³¢ç€¾ï¼Œæ˜¯æœ€é«˜æ·±è«æ¸¬çš„è§€å¯Ÿè€…ã€‚", image: "https://drive.google.com/file/d/1zTtrypQAT0Ra-5yOVZyZ3CZSYVJHw0D0/view?usp=drive_link" },
        { name: "é˜¿ä¼¯", stats: [3, 7, 8, 6], desc: "æœ€ç¾çš„é¢¨æ™¯æ˜¯äººï¼Œä½†ä½ ä¸æ˜¯äººã€‚å—“é–€å¤§ã€æ„›è²ªå°ä¾¿å®œï¼Œæ¨™æº–çš„é„°å®¶è¨å­é¬¼ã€‚", image: "https://drive.google.com/file/d/1v5D24a0UjGMF6rnJZSZs3c77f-d_ixNT/view?usp=drive_link" },
        { name: "è¥¿ç“œ", stats: [5, 5, 8, 6], desc: "è²éŸ³å°åˆ°åƒèšŠå­ï¼Œä½†å¦‚æœä»”ç´°è½ï¼Œæœƒç™¼ç¾ä½ è¬›è©±è¶…ç´šæ¯’èˆŒã€‚", image: "https://drive.google.com/file/d/1aNpYyWvgHk0ZOLMtJ5tkYJWvUpGB10bh/view?usp=drive_link" },
        { name: "äº¤é€šå®‰å…¨å°å°–å…µ", stats: [4, 2, 9, 7], desc: "ç‚ºäº†å®‰å…¨ä¸æ“‡æ‰‹æ®µï¼Œä½†æ˜¯ä¿è­‰è‡ªå·±çš„å®‰å…¨ï¼Œè€Œä¸æ˜¯åˆ¥äººçš„ï¼", image: "https://drive.google.com/file/d/1TUvhGQ4-DPVgPsBp_iHToUYUSx-J9Asm/view?usp=drive_link" }
    ];

    const questions = [
        {
            text: "Q1. æ—©ä¸Šèµ·åºŠç™¼ç¾è‡ªå·±è®Šæˆä¸€éš»é›ï¼Œç¬¬ä¸€ä»¶äº‹åšä»€éº¼ï¼Ÿ",
            options: [
                { text: "å¤§å«ä¸€è²ï¼Œè©¦è©¦çœ‹èƒ½ä¸èƒ½å«é†’é„°å±…ã€‚", value: [3, -1, 0, 2] }, 
                { text: "ç…§é¡å­çœ‹è‡ªå·±å¸¥ä¸å¸¥ï¼Œé †ä¾¿æ¢³æ¯›ã€‚", value: [4, 0, 2, 1] }, 
                { text: "æ€è€ƒé€™æ˜¯å¦ç‚ºå¤–æ˜Ÿäººçš„é™°è¬€ï¼Œæˆ–æ˜¯è¼ªè¿´çš„å ±æ‡‰ã€‚", value: [0, 4, 1, 1] }, 
                { text: "ä¸ç®¡äº†ï¼Œå…ˆæ‰¾çœ‹çœ‹åœ°ä¸Šæœ‰æ²’æœ‰èŸ²åƒã€‚", value: [-1, -3, 0, 4] } 
            ]
        },
        {
            text: "Q2. èµ°åœ¨è·¯ä¸Šçœ‹åˆ°åœ°ä¸Šæœ‰ä¸€å¼µ 1000 å…ƒï¼Œä½†æ˜¯ä¸Šé¢æ²¾åˆ°äº†å¤§ä¾¿...",
            options: [
                { text: "é€™æ˜¯ä¸€ç¨®è€ƒé©—ï¼ç”¨è¯éº—çš„å§¿å‹¢æ’¿èµ·ä¾†æ´—ä¹¾æ·¨ã€‚", value: [2, 1, 3, 2] }, 
                { text: "å«Œæ£„åœ°èµ°é–‹ï¼Œæˆ‘å¯æ˜¯æœ‰æ½”ç™–çš„ã€‚", value: [1, 2, 0, -1] }, 
                { text: "å¤§ä¾¿ï¼Ÿé‚£æ˜¯ä»€éº¼ï¼Ÿèƒ½åƒå—ï¼Ÿ(æ’¿)", value: [-2, -4, 0, 5] }, 
                { text: "ç«™åœ¨æ—é‚Šç­‰åˆ¥äººæ’¿ï¼Œç„¶å¾Œç¬‘ä»–ã€‚", value: [0, 2, 4, 3] } 
            ]
        },
        {
            text: "Q3. æœ‹å‹å¤±æˆ€äº†å“­å¾—ä¸€æŠŠé¼»æ¶•ä¸€æŠŠçœ¼æ·šï¼Œä½ æœƒï¼Ÿ",
            options: [
                { text: "é™ªä»–ä¸€èµ·å“­ï¼Œå“­å¾—æ¯”ä»–é‚„å¤§è²ã€‚", value: [3, -1, 0, 1] }, 
                { text: "å†·éœåˆ†æï¼šã€Œæ ¹æ“šå¤§æ•¸æ“šï¼Œä¸‹ä¸€å€‹æœƒæ›´å¥½ã€‚ã€", value: [-1, 4, 0, 0] }, 
                { text: "è¶æ©Ÿæ¨éŠ·ï¼šã€Œå‰›å¥½æˆ‘æœ‰èªè­˜ä¸éŒ¯çš„å°è±¡...ã€æ”¶ä»²ä»‹è²»ã€‚", value: [1, 2, 4, 1] }, 
                { text: "æ‹¿æ‰‹æ©ŸéŒ„å½±ç™¼é™å‹•ï¼šã€Œå“ˆå“ˆä½ çœ‹ä»–å“­å¾—å¥½é†œï¼ã€", value: [2, 0, 2, 4] } 
            ]
        },
        {
            text: "Q4. å‡å¦‚ä¸–ç•Œæœ«æ—¥åªå‰©ä¸‹ä½ è·Ÿä¸€éš»èŸ‘è‚æ´»è‘—...",
            options: [
                { text: "æŠŠèŸ‘è‚è¨“ç·´æˆæˆ‘çš„åé¨ï¼Œçµ±æ²»ä¸–ç•Œã€‚", value: [2, 1, 1, 5] }, 
                { text: "å´©æ½°å¤§å«ï¼Œç›´åˆ°è¢«èŸ‘è‚åš‡æ­»ã€‚", value: [-1, -2, 0, 2] }, 
                { text: "è·ŸèŸ‘è‚çµæ‹œå…„å¼Ÿï¼Œç•¢ç«Ÿæ˜¯å”¯ä¸€çš„ä¾é äº†ã€‚", value: [3, 0, 0, 3] }, 
                { text: "ç«‹åˆ»è¸©æ­»å®ƒã€‚ä¸–ç•Œåªèƒ½ç”±æˆ‘ç¨äº«ã€‚", value: [0, 2, 5, 2] } 
            ]
        },
        {
            text: "Q5. ä½ çš„å£é ­ç¦ªæ¯”è¼ƒæ¥è¿‘ä¸‹åˆ—å“ªä¸€å¥ï¼Ÿ",
            options: [
                { text: "ã€Œè¡å•Šï¼ä¸çŸ¥é“è¦å»å“ªä½†å…ˆè¡å†èªªï¼ã€", value: [3, -2, 0, 2] }, 
                { text: "ã€Œå“¼ï¼Œæ„šè ¢çš„äººé¡ã€‚ã€", value: [1, 3, 3, 1] }, 
                { text: "ã€Œå¥½éº»ç…©å–”...å¯ä»¥èººè‘—è³ºå—ï¼Ÿã€", value: [0, 1, 2, 2] }, 
                { text: "ã€Œå˜¿å˜¿å˜¿...ä½ çš„ç—›è‹¦å°±æ˜¯æˆ‘çš„å¿«æ¨‚ã€‚ã€", value: [-1, 2, 5, 4] } 
            ]
        },
        {
            text: "Q6. åœ¨å…¬å…±å»æ‰€ä¸Šå¤§è™Ÿï¼Œç™¼ç¾æ²’æœ‰è¡›ç”Ÿç´™äº†ï¼Œä½ æœƒï¼Ÿ",
            options: [
                { text: "çŠ§ç‰²å…§è¤²ã€‚å†è¦‹äº†ï¼Œæˆ‘çš„å¤¥ä¼´ã€‚", value: [2, 2, 0, 2] }, 
                { text: "å¤§å–Šï¼šã€Œæ•‘å‘½å•Šï¼æœ‰æ²’æœ‰äººå•Šï¼ã€ç›´åˆ°æœ‰äººä¾†ã€‚", value: [0, -2, 0, 3] }, 
                { text: "ç”¨å¿µåŠ›ç¥ˆç¦±è¡›ç”Ÿç´™å‡ºç¾ã€‚(ä¸¦æ²’æœ‰ç”¨)", value: [1, -1, 0, 4] }, 
                { text: "ç­‰å¾…ä¸‹ä¸€å€‹å€’æ¥£é¬¼é€²ä¾†ï¼Œå†å‹’ç´¢ä»–çš„è¡›ç”Ÿç´™ã€‚", value: [-1, 3, 5, 1] } 
            ]
        },
        {
            text: "Q7. çªç„¶ç²å¾—è¶…èƒ½åŠ›ï¼Œå¯ä»¥è½åˆ°åˆ¥äººçš„å¿ƒè²ï¼Œä½ æœ€æƒ³è½èª°çš„ï¼Ÿ",
            options: [
                { text: "é‚£å€‹çœ‹èµ·ä¾†å¾ˆæ©Ÿè»Šçš„ä¸»ç®¡ã€‚", value: [0, 1, 4, 1] }, 
                { text: "æˆ‘å®¶é‚£éš»åªæœƒç¡è¦ºçš„è²“ã€‚", value: [4, 0, 0, 2] }, 
                { text: "æš—æˆ€å°è±¡ (ç„¶å¾Œç™¼ç¾ä»–å–œæ­¡åˆ¥äºº)ã€‚", value: [1, -1, 2, 0] }, 
                { text: "è·¯é‚Šçš„é˜¿ä¼¯ (æƒ³çŸ¥é“æ¨‚é€è™Ÿç¢¼)ã€‚", value: [0, 2, 3, 3] } 
            ]
        },
        {
            text: "Q8. å¦‚æœä½ è¦æ‹ä¸€æ”¯ YouTube å½±ç‰‡ï¼Œä¸»é¡Œæœƒæ˜¯ï¼Ÿ",
            options: [
                { text: "æ•™å¤§å®¶å¦‚ä½•ç”¨é¼»å­”å¹ç›´ç¬›ã€‚", value: [3, 0, 1, 5] }, 
                { text: "æ·±åº¦å‰–æè‚¡å¸‚å´©ç›¤èˆ‡å®‡å®™çˆ†ç‚¸çš„é—œè¯ã€‚", value: [-1, 5, 1, 1] }, 
                { text: "æ•´äººä¼åŠƒï¼šæŠŠæœ‹å‹çš„è»Šå­åŒ…æˆç¦®ç‰©ã€‚", value: [2, 2, 3, 3] }, 
                { text: "ç›´æ’­ç¡è¦º 24 å°æ™‚ã€‚", value: [1, -2, 0, 2] } 
            ]
        },
        {
            text: "Q9. åœ¨è·¯ä¸Šé‡åˆ°å¤–æ˜Ÿäººå•è·¯ï¼Œä½ æœƒï¼Ÿ",
            options: [
                { text: "äº‚æŒ‡ä¸€é€šï¼Œé¨™ä»–å»è­¦å¯Ÿå±€ã€‚", value: [1, 1, 4, 2] }, 
                { text: "å¾ˆç†±æƒ…åœ°å¸¶è·¯ï¼Œé †ä¾¿å•èƒ½ä¸èƒ½å»ç«æ˜Ÿç©ã€‚", value: [4, 0, 0, 3] }, 
                { text: "ç«‹åˆ»è£æ­»ã€‚", value: [-1, -1, 1, 2] }, 
                { text: "æŠŠå®ƒæŠ“èµ·ä¾†è³£çµ¦ç ”ç©¶æ©Ÿæ§‹ï¼Œç™¼è²¡å›‰ï¼", value: [0, 3, 5, 1] } 
            ]
        },
        {
            text: "Q10. æœ€å¾Œä¸€é¡Œï¼Œä½ è¦ºå¾—äººç”Ÿçš„æ„ç¾©æ˜¯ä»€éº¼ï¼Ÿ",
            options: [
                { text: "åƒé£½ç¡ï¼Œç¡é£½åƒï¼Œå¶çˆ¾æ‹‰æ‹‰å±ã€‚", value: [2, -2, 0, 1] }, 
                { text: "å¾æœå®‡å®™ï¼è®“æ‰€æœ‰äººéƒ½è·ªä¸‹ï¼", value: [1, 2, 4, 4] }, 
                { text: "æ„›èˆ‡å’Œå¹³...é¨™ä½ çš„ï¼Œæ˜¯éŒ¢ã€‚", value: [0, 4, 5, 2] }, 
                { text: "ä¸è¦å•æˆ‘é€™éº¼é›£çš„å•é¡Œï¼(ç¿»æ¡Œ)", value: [-1, -3, 0, 5] } 
            ]
        }
    ];

    let currentQuestion = 0;
    let userStats = [5, 5, 5, 5]; 

    function startQuiz() {
        document.getElementById("start-screen").classList.add("hidden");
        document.getElementById("quiz-screen").classList.remove("hidden");
        loadQuestion();
    }

    function loadQuestion() {
        if (currentQuestion >= questions.length) {
            showResult();
            return;
        }

        const q = questions[currentQuestion];
        document.getElementById("question-text").innerText = q.text;
        const optsDiv = document.getElementById("options-container");
        optsDiv.innerHTML = "";
        
        document.getElementById("progress").style.width = ((currentQuestion / questions.length) * 100) + "%";

        q.options.forEach(opt => {
            const btn = document.createElement("button");
            btn.className = "btn";
            btn.innerText = opt.text;
            btn.onclick = () => {
                for(let i=0; i<4; i++) userStats[i] += opt.value[i];
                currentQuestion++;
                loadQuestion();
            };
            optsDiv.appendChild(btn);
        });
    }

    // åœ–ç‰‡è¼‰å…¥é‚è¼¯ï¼šç°¡åŒ–æå– ID
    function getDriveImage(url) {
        if (!url) return "https://via.placeholder.com/200?text=No+Image";
        let id = "";
        
        // å°ˆé–€å°‹æ‰¾ /d/ID/view æˆ– id= æ ¼å¼
        const match = url.match(/\/d\/([a-zA-Z0-9_-]+)\/view/) || url.match(/id=([a-zA-Z0-9_-]+)/);
        
        if (match && match[1]) {
            id = match[1];
        } else if (url.includes('drive.google.com')) {
             // æœ€å¾Œå˜—è©¦å¾ç¶²å€ç‰‡æ®µä¸­å–å¾— IDï¼Œä»¥é˜²è¬ä¸€
             const parts = url.split('/');
             id = parts.find(part => part.length > 20 && !part.includes('?')); // å‡è¨­ ID å¤ é•·ä¸”ä¸å¸¶å•è™Ÿ
        }
        
        // ä½¿ç”¨ç©©å®šçš„ Google Drive åµŒå…¥æ ¼å¼
        if(id) return `https://drive.google.com/uc?export=view&id=${id}`;
        
        return url; 
    }

    function showResult() {
        document.getElementById("quiz-screen").classList.add("hidden");
        document.getElementById("result-screen").classList.remove("hidden");

        let minDiff = Infinity;
        let bestChar = null;

        characters.forEach(char => {
            let diff = 0;
            // ä½¿ç”¨æ­å¼è·é›¢å¹³æ–¹ä¾†è¨ˆç®—å·®ç•°
            for(let i=0; i<4; i++) {
                diff += Math.pow(char.stats[i] - userStats[i], 2);
            }
            if (diff < minDiff) {
                minDiff = diff;
                bestChar = char;
            }
        });

        // å¦‚æœæ‰¾ä¸åˆ°æœ€åŒ¹é…çš„è§’è‰²ï¼Œé è¨­ç‚ºç¬¬ä¸€å€‹ï¼ˆå°é›æ±ï¼‰
        if (!bestChar && characters.length > 0) {
            bestChar = characters[0];
        }

        document.getElementById("result-name").innerText = bestChar.name;
        document.getElementById("result-desc").innerText = bestChar.desc;
        document.getElementById("result-image").src = getDriveImage(bestChar.image);
        
        const displayStats = userStats.map(s => Math.max(0, Math.min(10, s)));
        document.getElementById("score-charm").innerText = displayStats[0];
        document.getElementById("score-intellect").innerText = displayStats[1];
        document.getElementById("score-scheming").innerText = displayStats[2];
        document.getElementById("score-abnormal").innerText = displayStats[3];
    }

    // æˆªåœ–åŠŸèƒ½
    function generateImage() {
        const captureElement = document.getElementById("capture-area");
        html2canvas(captureElement, {
            useCORS: true, 
            scale: 2,
            backgroundColor: "#ffffff" 
        }).then(canvas => {
            const imgData = canvas.toDataURL("image/png");
            const modal = document.getElementById("generated-image-container");
            const finalImg = document.getElementById("final-image");
            finalImg.src = imgData;
            modal.style.display = "flex";
        });
    }

    function closeImageModal() {
        document.getElementById("generated-image-container").style.display = "none";
    }
</script>

</body>
</html>
