<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åºŠç·¨æ•…äº‹å®‡å®™è§’è‰²è¨ºæ–·å®¤</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        body {
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            background-color: #ffd700;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            position: relative;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 10px 10px 0px rgba(0,0,0,1);
            max-width: 500px;
            width: 100%;
            text-align: center;
            border: 4px solid #000;
        }
        h1 { color: #000; margin-bottom: 5px; font-weight: 900; font-size: 28px; }
        .subtitle { color: #d32f2f; font-weight: bold; margin-bottom: 30px; font-size: 18px; }
        
        .floating-yt-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #ff0000;
            color: white;
            padding: 15px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            border: 3px solid #000;
            box-shadow: 3px 3px 0px #000;
            transition: transform 0.2s;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .floating-yt-btn:hover {
            transform: scale(1.05);
            background-color: #cc0000;
        }

        .btn {
            background-color: #fff;
            color: #000;
            border: 3px solid #000;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 5px 5px 0px #aaa;
            transition: all 0.1s;
            margin: 10px 0;
            width: 100%;
            text-align: left;
            position: relative;
        }
        .btn:hover { background-color: #f0f0f0; transform: translate(-2px, -2px); box-shadow: 7px 7px 0px #aaa; }
        .btn:active { transform: translate(2px, 2px); box-shadow: 1px 1px 0px #333; }
        
        .action-btn {
            background-color: #ff5252;
            color: white;
            text-align: center;
            box-shadow: 4px 4px 0px #000;
        }
        .action-btn:hover { background-color: #ff1744; }

        .hidden { display: none; }
        
        .progress-bar {
            width: 100%;
            height: 15px;
            background-color: #fff;
            border: 2px solid #000;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #32cd32;
            width: 0%;
            transition: width 0.3s ease;
        }

        #capture-area {
            background: white;
            padding: 20px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .result-img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 15px;
            border: 4px solid #000;
            margin: 15px auto;
            background-color: #eee;
        }
        
        .stat-box {
            display: none; 
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border: 2px solid #000;
            text-align: left;
            font-family: monospace;
            font-size: 1.1em;
        }
        .result-title {
            font-size: 32px;
            font-weight: 900;
            color: #d32f2f;
            text-shadow: 1px 1px 0px #000;
            margin: 10px 0;
        }
        
        #generated-image-container {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #generated-image-container img {
            max-width: 90%;
            max-height: 80%;
            border: 5px solid white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .close-btn {
            color: white;
            font-size: 18px;
            margin-top: 15px;
            cursor: pointer;
            padding: 10px 20px;
            background: #333;
            border-radius: 50px;
        }
    </style>
</head>
<body>

<a href="https://www.youtube.com/@%E5%BA%8A%E7%B7%A8%E6%95%85%E4%BA%8BBadTimeStories" target="_blank" class="floating-yt-btn">
    ğŸ“º è¨‚é–±é »é“
</a>

<div class="container" id="start-screen">
    <h1>âœ¨ åºŠç·¨æ•…äº‹å®‡å®™<br>è§’è‰²è¨ºæ–·å®¤ âœ¨</h1>
    <p class="subtitle">æ¸¬æ¸¬çœ‹ä½ åœ¨åºŠç·¨å®‡å®™è£¡æ˜¯èª°ï¼</p>
    
    <div style="margin: 30px 0;">
        <img src="è§’è‰²åœ–ç‰‡/logo.png" alt="Quiz Logo" style="width:150px; height:150px; object-fit:cover; border-radius:50%; border:3px solid #000;">
    </div>
    
    <button class="btn action-btn" onclick="startQuiz()">ğŸ”¥ é–‹å§‹è¨ºæ–· ğŸ”¥</button>
</div>

<div class="container hidden" id="quiz-screen">
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
    <h2 id="question-text" style="font-size:1.3em; margin-bottom: 20px;">å•é¡Œè¼‰å…¥ä¸­...</h2>
    <div id="options-container"></div>
</div>

<div class="container hidden" id="result-screen">
    <div id="capture-area">
        <h3 style="margin:0; color:#555;">ä½ çš„éˆé­‚è§’è‰²æ˜¯ï¼š</h3>
        <div class="result-title" id="result-name"></div>
        
        <img id="result-image" class="result-img" src="" alt="è§’è‰²åœ–ç‰‡">
        
        <p id="result-desc" style="font-size: 1.1em; font-weight: bold; line-height: 1.6; color:#333;"></p>
        
        <div class="stat-box">
            <div>âœ¨ é­…åŠ›ï¼š<span id="score-charm"></span></div>
            <div>ğŸ§  æ™ºåŠ›ï¼š<span id="score-intellect"></span></div>
            <div>ğŸ˜ˆ å¿ƒæ©Ÿï¼š<span id="score-scheming"></span></div>
            <div>ğŸ¤ª ç˜‹ç‹‚ï¼š<span id="score-abnormal"></span></div>
        </div>
        <p style="margin-top:10px; font-size:0.8em; color:#999;">#åºŠç·¨æ•…äº‹å®‡å®™è§’è‰²è¨ºæ–·å®¤</p>
    </div>

    <button class="btn action-btn" onclick="generateImage()" style="background-color: #4CAF50;">ğŸ“¸ ç”¢ç”Ÿçµæœåœ– (é•·æŒ‰å„²å­˜)</button>
    <button class="btn action-btn" onclick="location.reload()" style="background-color: #607d8b;">ğŸ”„ å†æ¸¬ä¸€æ¬¡</button>
</div>

<div id="generated-image-container">
    <p style="color: #fff; font-weight: bold; font-size:1.2em;">ğŸ‘‡ é•·æŒ‰åœ–ç‰‡å³å¯å„²å­˜ ğŸ‘‡</p>
    <img id="final-image" src="" />
    <div class="close-btn" onclick="closeImageModal()">é—œé–‰è¦–çª—</div>
</div>

<script>
    const characterNames = [
        "å°é›æ±", "é›çˆ¸", "é›åª½", "é›å‹•å¦¹", "å°ç‹—", "å°ç†Š", "å°è±¬", "æ¿€ç™½ç‹¼", "å°å’ª", "ç­ç“œ",
        "ç­èƒ–", "ç­ä¹¾", "ç­ä¸­å±±", "ç­å…‹é‡Œæ–¯å¤šå¤«", "ç«¹é¼ ", "è›¤èœŠç²¾", "äººåƒå°å¸«", "è˜¿è””å°ç”Ÿ", "ç´…æ©Ÿè»Š", "åºŠç·¨",
        "è–¯ç‰‡", "è‡å…”å›", "è‡ç‹—", "é˜¿ä¼¯", "è¥¿ç“œ", "äº¤é€šå®‰å…¨å°å°–å…µ"
    ];

    const characters = [
        { name: "å°é›æ±", desc: "é›–ç„¶è…¦è¢‹ç©ºç©ºï¼Œä½†é€™æ­£æ˜¯ä½ çš„é­…åŠ›æ‰€åœ¨ï¼ç”¨æ‹æ“Šæ¢ç´¢é€™å€‹ä¸–ç•Œå§ï¼", image: "è§’è‰²åœ–ç‰‡/å°é›æ±.png" },
        { name: "é›çˆ¸", desc: "è¡¨é¢ä¸Šæ˜¯å€‹æ­£å¸¸äººï¼Œä½†å…§å¿ƒæ·±è™•è—è‘—ä¸€å€‹ç‹‚é‡çš„æ–æ»¾éˆé­‚ (é‚„æœ‰ç§æˆ¿éŒ¢)", image: "è§’è‰²åœ–ç‰‡/é›çˆ¸.png" },
        { name: "é›åª½", desc: "ä½ æ˜¯å®¶è£¡çš„åœ°ä¸‹å¸ä»¤å®˜ï¼ŒæŒæ¡æ‰€æœ‰æƒ…å ±èˆ‡ç®—è¨ˆï¼Œæ²’äººæ•¢åœ¨ä½ é¢å‰é€ æ¬¡ï¼", image: "è§’è‰²åœ–ç‰‡/é›åª½.png" },
        { name: "é›å‹•å¦¹", desc: "ä½ çš„èªé€Ÿæ¯”å¤§è…¦å‹•çš„é‚„å¿«ï¼Œæƒ…ç·’èµ·ä¼æ¯”é›²éœ„é£›è»Šå¤§ï¼Œæ´»è‘—å°±æ˜¯ä¸€å ´è¯éº—çš„å…«é»æª”ï¼", image: "è§’è‰²åœ–ç‰‡/é›å‹•å¦¹.png" },
        { name: "å°ç‹—", desc: "åªè¦æœ‰é£¯åƒï¼Œä½ å°±æ˜¯å…¨ä¸–ç•Œæœ€å¿«æ¨‚çš„ç”Ÿç‰©ã€‚å¿ èª åº¦ 100%ï¼Œæ™ºå•†...æˆ‘å€‘å…ˆä¸è«‡é€™å€‹ã€‚", image: "è§’è‰²åœ–ç‰‡/å°ç‹—.png" },
        { name: "å°ç†Š", desc: "ä½ çœ‹èµ·ä¾†ç„¡å®³ï¼Œå…¶å¯¦æ»¿è…¦å­å¥‡æ€ªçš„æƒ³æ³•ã€‚æ˜¯å€‹ç¨±è·çš„æå‹ï¼Œå¶çˆ¾æœƒè®Šæ…‹ä¸€ä¸‹ã€‚", image: "è§’è‰²åœ–ç‰‡/å°ç†Š.png" },
        { name: "å°è±¬", desc: "åœ¨ä¸€ç¾¤ç˜‹å­è£¡é¢ï¼Œä½ æ˜¯å”¯ä¸€çš„æ­£å¸¸äººã€‚è¾›è‹¦ä½ äº†ï¼Œè² è²¬æ”¶æ‹¾çˆ›æ”¤å­çš„æ™ºå›Šæ“”ç•¶ã€‚", image: "è§’è‰²åœ–ç‰‡/å°è±¬.png" },
        { name: "æ¿€ç™½ç‹¼", desc: "é›–ç„¶ä½ å¾ˆæœ‰éŒ¢åˆæœ‰å“å‘³ï¼Œä½†è¬›è©±çœŸçš„å¥½æ©Ÿè»Šã€‚äº«å—è¢«äººè¨å­çš„å¿«æ„Ÿå—ï¼Ÿ", image: "è§’è‰²åœ–ç‰‡/æ¿€ç™½ç‹¼.png" },
        { name: "å°å’ª", desc: "å„ªé›…ã€æ½”ç™–ã€é«˜è²´ã€‚çœ‹è‘—é€™ç¾¤é«’æ±è¥¿ï¼Œä½ çš„çœ¼ç¥å……æ»¿äº†æ…ˆæ‚²çš„é„™è¦–ã€‚", image: "è§’è‰²åœ–ç‰‡/å°å’ª.png" },
        { name: "ç­ç“œ", desc: "ç‚ºä»€éº¼å—å‚·çš„ç¸½æ˜¯ä½ ï¼Ÿé›–ç„¶è†½å°åˆæ„›å«ï¼Œä½†ä¹Ÿæ˜¯åœ˜é«”ä¸­ä¸å¯æˆ–ç¼ºçš„å‘†ç“œã€‚", image: "è§’è‰²åœ–ç‰‡/ç­ç“œ.png" },
        { name: "ç­èƒ–", desc: "ä½ çš„å­˜åœ¨æ„Ÿå»ºç«‹åœ¨åæ§½åˆ¥äººä¸Šï¼Œä½†å¾ˆéš¨å’Œå•¦ã€‚", image: "è§’è‰²åœ–ç‰‡/ç­èƒ–.png" },
        { name: "ç­ä¹¾", desc: "å˜´å·´æ¯”èº«é«”èª å¯¦ï¼Œæ˜æ˜æƒ³åŠ å…¥å¤§å®¶å»ç¸½æ˜¯ç”¨é…¸è¨€é…¸èªä¾†åˆ·å­˜åœ¨æ„Ÿã€‚", image: "è§’è‰²åœ–ç‰‡/ç­ä¹¾.png" },
        { name: "ç­ä¸­å±±", desc: "äººå°é¬¼å¤§ï¼Œç”¨æœ€ç„¡è¾œçš„è‡‰èªªå‡ºæœ€å¯æ€•çš„è©±ï¼Œå°‡ä¾†å¿…æˆå¤§å™¨(æˆ–å¤§åæ´¾)ã€‚", image: "è§’è‰²åœ–ç‰‡/ç­ä¸­å±±.png" },
        { name: "ç­å…‹é‡Œæ–¯å¤šå¤«", desc: "ä½ çš„ä¸–ç•Œå¤ªæ·±å¥§äº†ï¼Œå‡¡äººç„¡æ³•ç†è§£ã€‚æ²‰é»˜å¯¡è¨€æ˜¯å› ç‚ºä½ åœ¨è·Ÿå®‡å®™é€£ç·šã€‚", image: "è§’è‰²åœ–ç‰‡/ç­å…‹é‡Œæ–¯å¤šå¤«.png" }, 
        { name: "ç«¹é¼ ", desc: "ä¸­æš‘äº†å—ï¼Ÿä¸å¦‚...å˜¿å˜¿å˜¿ã€‚ä½ çš„æ€è€ƒé‚è¼¯ç°¡å–®ç²—æš´ï¼Œå°±æ˜¯ã€Œåƒã€èˆ‡ã€Œè¢«åƒã€ã€‚", image: "è§’è‰²åœ–ç‰‡/ç«¹é¼ .png" },
        { name: "è›¤èœŠç²¾", desc: "çœ‹åˆ°å¤§å®¶é€™éº¼é–‹å¿ƒï¼Œä½ å°±è¦ºå¾—æ¸¾èº«ä¸å°å‹ï¼Œåªæƒ³è©›å’’åˆ¥äººï¼", image: "è§’è‰²åœ–ç‰‡/è›¤èœŠç²¾.png" },
        { name: "äººåƒå°å¸«", desc: "ä½ èªªçš„è©±æ²’äººè½å¾—æ‡‚ï¼Œä½†æ„Ÿè¦ºå¥½å²å®³ã€‚äº«å—è¢«è†œæ‹œçš„å¿«æ„Ÿï¼Œé›–ç„¶å…¶å¯¦éƒ½åœ¨èƒ¡æ‰¯ã€‚", image: "è§’è‰²åœ–ç‰‡/äººåƒå°å¸«.png" },
        { name: "è˜¿è””å°ç”Ÿ", desc: "æ²’æœ‰è‡ªæˆ‘ï¼Œéš¨æ³¢é€æµã€‚å°å¸«èªªå¤§ä¾¿æ˜¯é¦™çš„ï¼Œä½ ä¹Ÿæœƒé»é ­èªªè®šã€‚", image: "è§’è‰²åœ–ç‰‡/è˜¿è””å°ç”Ÿ.png" },
        { name: "ç´…æ©Ÿè»Š", desc: "ä½ å·²ç¶“æ”¾æ£„æ²»ç™‚äº†ã€‚ç”Ÿæ´»ç¿’æ…£æ¥µå·®ï¼Œå˜´å·´(æ’æ°£ç®¡)æ¥µè‡­ï¼Œä½†æ´»å¾—éå¸¸è‡ªåœ¨ã€‚", image: "è§’è‰²åœ–ç‰‡/ç´…æ©Ÿè»Š.png" },
        { name: "åºŠç·¨", desc: "å‰µé€ é€™ä¸€åˆ‡æ··äº‚çš„å§‹ä½œä¿‘è€…ã€‚é›†è®Šæ…‹ã€å‰µæ„èˆ‡è²ªå©ªæ–¼ä¸€èº«çš„ç¥...ç¶“ç—…ã€‚", image: "è§’è‰²åœ–ç‰‡/åºŠç·¨.png" },
        { name: "è–¯ç‰‡", desc: "æ²™ç™¼é¦¬éˆ´è–¯çš„æ¥µè‡´ã€‚åªè¦æœ‰ç•°æ€§åœ¨ï¼Œä½ å¯ä»¥ç¬é–“å¾å»¢ç‰©è®Šæˆè¶…äººã€‚", image: "è§’è‰²åœ–ç‰‡/è–¯ç‰‡.png" },
        { name: "è‡å…”å›", desc: "ä½ çš„è…¦è¿´è·¯æ˜¯è¿·å®®ã€‚æ²’äººçŸ¥é“ä½ ä¸‹ä¸€ç§’æœƒè·³å»å“ªï¼ŒåŒ…æ‹¬ä½ è‡ªå·±ã€‚", image: "è§’è‰²åœ–ç‰‡/è‡å…”å›.png" },
        { name: "è‡ç‹—", desc: "é¢ç™±é«˜æ‰‹ã€‚å…§å¿ƒæˆ²å¾ˆå¤šï¼Œä½†å¤–è¡¨æ¯«ç„¡æ³¢ç€¾ï¼Œæ˜¯æœ€é«˜æ·±è«æ¸¬çš„è§€å¯Ÿè€…ã€‚", image: "è§’è‰²åœ–ç‰‡/è‡ç‹—.png" },
        { name: "é˜¿ä¼¯", desc: "æœ€ç¾çš„é¢¨æ™¯æ˜¯äººï¼Œä½†ä½ ä¸æ˜¯äººã€‚å—“é–€å¤§ã€æ„›è²ªå°ä¾¿å®œï¼Œæ¨™æº–çš„é„°å®¶è¨å­é¬¼ã€‚", image: "è§’è‰²åœ–ç‰‡/é˜¿ä¼¯.png" },
        { name: "è¥¿ç“œ", desc: "è²éŸ³å°åˆ°åƒèšŠå­ï¼Œä½†å¦‚æœä»”ç´°è½ï¼Œæœƒç™¼ç¾ä½ è¬›è©±è¶…ç´šæ¯’èˆŒã€‚", image: "è§’è‰²åœ–ç‰‡/è¥¿ç“œ.png" },
        { name: "äº¤é€šå®‰å…¨å°å°–å…µ", desc: "ç‚ºäº†å®‰å…¨ä¸æ“‡æ‰‹æ®µï¼Œä½†æ˜¯ä¿è­‰è‡ªå·±çš„å®‰å…¨ï¼Œè€Œä¸æ˜¯åˆ¥äººçš„ï¼", image: "è§’è‰²åœ–ç‰‡/äº¤é€šå®‰å…¨å°å°–å…µ.png" }
    ];

    let userWeights = {};
    characterNames.forEach(name => {
        userWeights[name] = 0;
    });

    const questions = [
        {
            text: "Q1. æ—©ä¸Šèµ·åºŠç™¼ç¾é¬§é˜æ²’éŸ¿ï¼Œå·²ç¶“é²åˆ°å…©å°æ™‚äº†ï¼Œä½ æœƒï¼Ÿ",
            options: [
                { text: "å¤§è²å°–å«ï¼Œç„¶å¾ŒåŸåœ°äº‚è·‘ï¼Œä¸çŸ¥é“è‡ªå·±åœ¨å¿™ä»€éº¼ã€‚", 
                  value: [3, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0] },
                { text: "åæ­£éƒ½é²åˆ°äº†ï¼Œä¹¾è„†è«‹ç—…å‡ï¼Œç¹¼çºŒèººå›å»ç¡è¦ºã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 1, 0, 0, 0, 0, 0] },
                { text: "ç«‹åˆ»é–‹å§‹ç®—é€™å…©å€‹å°æ™‚çš„è–ªæ°´æå¤±ï¼Œä¸¦æ€è€ƒæ€éº¼è£œå›ä¾†ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0] },
                { text: "å†·éœåœ°èµ·åºŠï¼Œé¢ç„¡è¡¨æƒ…åœ°åˆ·ç‰™ï¼Œå‡è£é€™ä¸€åˆ‡éƒ½åœ¨è¨ˆç•«ä¸­ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0] }
            ]
        },
        {
            text: "Q2. èµ°åœ¨è·¯ä¸Šçœ‹åˆ°æœ‰äººè¸©åˆ°é¦™è•‰çš®æ»‘å€’ï¼Œä½ æœƒï¼Ÿ",
            options: [
                { text: "ç™¼å‡ºã€å˜¿å˜¿å˜¿ã€çš„ç¬‘è²ï¼Œç„¶å¾Œå·å·æ‹¿æ‰‹æ©ŸéŒ„å½±ã€‚", 
                  value: [0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0] },
                { text: "è¡éå»æ‰¶ä»–ï¼Œé †ä¾¿å¤§è²åš·åš·ï¼Œè®“å¤§å®¶éƒ½çŸ¥é“ä½ åœ¨åšå¥½äº‹ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "é€™ä¸é—œæˆ‘çš„äº‹ï¼Œæˆ‘åªé—œå¿ƒæ—é‚Šæ”¤è²©è³£çš„é¦™è…¸å¥½åƒå¾ˆé¦™ã€‚", 
                  value: [0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "ä¸€è‡‰å­ä¸–åœ°ç¹é–‹ï¼Œå¿ƒæƒ³äººé¡ç‚ºä»€éº¼é€™éº¼ç¬¨æ‹™ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0] }
            ]
        },
        {
            text: "Q3. æœ‹å‹è«‹ä½ åƒä¸€é “è¶…ç´šé›£åƒçš„æ™šé¤ï¼Œä½ æœƒï¼Ÿ",
            options: [
                { text: "é›–ç„¶å¾ˆé›£åƒï¼Œä½†å› ç‚ºæ˜¯å…è²»çš„ï¼Œæ‰€ä»¥é‚„æ˜¯æŠŠå®ƒåƒå…‰å…‰ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "ç•¶é¢å¤§è²æ‰¹è©•ï¼šã€é€™ä»€éº¼æ±è¥¿ï¼Ÿä½ æ˜¯æƒ³è¬€æ®ºæˆ‘å—ï¼Ÿã€", 
                  value: [0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "ç”¨æ¥µå°çš„è²éŸ³ç¢ç¢å¿µï¼Œå«Œæ£„æ“ºç›¤é†œã€å‘³é“å·®ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0] },
                { text: "å¾®ç¬‘è‘—èªªã€å¥½åƒã€ï¼Œå› ç‚ºæˆ‘æ ¹æœ¬æ²’æœ‰å‘³è¦ºï¼Œä¹Ÿä¸åœ¨ä¹ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0] }
            ]
        },
        {
            text: "Q4. ä½ ç™¼ç¾ä½ çš„æˆ¿é–“è¢«å¤–æ˜Ÿäººå…¥ä¾µäº†ï¼Œä½ æœƒï¼Ÿ",
            options: [
                { text: "å•å¤–æ˜Ÿäººï¼šã€ä½ å€‘æ˜Ÿçƒæœ‰å¦¹å­å—ï¼Ÿã€", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0] },
                { text: "è©¦åœ–è·Ÿå¤–æ˜Ÿäººé€²è¡Œå¿ƒéˆæ„Ÿæ‡‰ï¼Œäº¤æµå®‡å®™çœŸç†ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "é€™ä¸€å®šæ˜¯æ”¿åºœçš„é™°è¬€ï¼æˆ‘è¦å¯«ä¿¡å»æŠ•è¨´åœ‹é˜²æ¼æ´ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3] },
                { text: "å°–å«ï¼ç„¶å¾ŒæŠŠæ‰€æœ‰æ±è¥¿éƒ½ä¸Ÿå‘å¤–æ˜Ÿäººï¼Œè£½é€ æ··äº‚ã€‚", 
                  value: [0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }
            ]
        },
        {
            text: "Q5. ä½ çš„è€é—†å«ä½ åŠ ç­ï¼Œä½†ä½ ä»Šå¤©ç´„äº†äººï¼Œä½ æœƒï¼Ÿ",
            options: [
                { text: "ç”¨æœ€å®Œç¾çš„é‚è¼¯èªªæœè€é—†ï¼Œç‚ºä»€éº¼æˆ‘åŠ ç­å°å…¬å¸æ˜¯æœ‰å®³çš„ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0] },
                { text: "è¡¨é¢ç­”æ‡‰ï¼Œç„¶å¾Œå·å·æŠŠå·¥ä½œæ¨çµ¦æ—é‚Šçš„åŒäº‹ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "ç«‹åˆ»è£ç—…ï¼Œè¡¨æ¼”ä¸€å ´ã€æˆ‘å¿«ä¸è¡Œäº†ã€çš„æˆ²ç¢¼ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "ç›´æ¥æŠŠè€é—†çš„è»Šèƒåˆºç ´ï¼Œé€™æ¨£ä»–ä¹Ÿå›ä¸äº†å®¶ï¼ˆé–‹ç©ç¬‘çš„ï¼‰ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0] }
            ]
        },
        {
            text: "Q6. ä½ åœ¨è·¯é‚Šæ’¿åˆ°ä¸€æŠŠå‰ä»–ï¼Œä½ æœƒï¼Ÿ",
            options: [
                { text: "ç«‹åˆ»é–‹å§‹å½ˆå¥ï¼Œä¸ç®¡å¥½ä¸å¥½è½ï¼Œåæ­£æˆ‘è¦é–‹æ¼”å”±æœƒï¼", 
                  value: [0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "æ‹¿å»è³£æ‰ï¼Œçœ‹çœ‹èƒ½æ›å¤šå°‘é£¼æ–™æˆ–é›¶é£Ÿã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "è¦ºå¾—å®ƒå¾ˆé«’ï¼Œç”¨å…©æ ¹æ‰‹æŒ‡æè‘—æŠŠå®ƒä¸Ÿåˆ°åƒåœ¾æ¡¶ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "ç”¨å®ƒä¾†ç™¼å‡ºå¥‡æ€ªçš„å™ªéŸ³ï¼Œæ¸¬è©¦è·¯äººçš„å¿è€æ¥µé™ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0] }
            ]
        },
        {
            text: "Q7. ä½ è¢«å›°åœ¨é›»æ¢¯è£¡ï¼Œé€™æ™‚ä½ æœƒï¼Ÿ",
            options: [
                { text: "å¤§å–Šï¼šã€Œé€™ä¸€å®šæ˜¯å¤–æ˜Ÿäººçš„é™°è¬€ï¼ä»–å€‘ä¾†æ¥æˆ‘äº†ï¼ã€", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "é»˜é»˜è¹²åœ¨è§’è½ï¼Œç•«åœˆåœˆè©›å’’é€™æ£Ÿå¤§æ¨“çš„ç®¡ç†å“¡ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0] },
                { text: "é–‹å§‹æª¢æŸ¥é›»æ¢¯è£¡çš„æ¨™èªæœ‰æ²’æœ‰éŒ¯å­—ï¼Œæˆ–æ˜¯å¦ç¬¦åˆæ³•è¦ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3] },
                { text: "è¶æ©Ÿåœ¨é›»æ¢¯ç‰†å£ä¸Šå¡—é´‰ï¼Œç•™ä¸‹ã€åˆ°æ­¤ä¸€éŠã€çš„è¨˜è™Ÿã€‚", 
                  value: [0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }
            ]
        },
        {
            text: "Q8. æœ‹å‹å•ä½ ï¼šã€Œæˆ‘çœ‹èµ·ä¾†èƒ–å—ï¼Ÿã€ï¼Œä½ æœƒï¼Ÿ",
            options: [
                { text: "ã€Œä¸æœƒå•Šï¼ã€ï¼ˆä½†å¿ƒè£¡æƒ³ï¼šèƒ–å¾—è·Ÿè±¬ä¸€æ¨£ï¼‰ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "ã€Œä½ èƒ–ä¸èƒ–ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ä½ çš„éˆé­‚æ˜¯å¦è¼•ç›ˆã€‚ã€", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "ã€Œèƒ–ï¼Ÿé‚£æ˜¯ä»€éº¼ï¼Ÿèƒ½åƒå—ï¼Ÿã€", 
                  value: [0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "ç›´æ¥å¿½ç•¥å•é¡Œï¼Œé–‹å§‹è¬›è‡ªå·±æœ€è¿‘æœ‰å¤šç¾ã€å¤šå—æ­¡è¿ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }
            ]
        },
        {
            text: "Q9. å¦‚æœä½ å¯ä»¥åˆ¶å®šä¸€æ¢æ³•å¾‹ï¼Œä½ æœƒè¦å®šï¼Ÿ",
            options: [
                { text: "æ‰€æœ‰äººæ¯å¤©éƒ½å¿…é ˆæ‹æ‰“è‡ªå·±çš„è‡‰é °åä¸‹ï¼Œä¿æŒæ¸…é†’ã€‚", 
                  value: [3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "ç¦æ­¢ä»»ä½•äººæ¯”æˆ‘å¯Œæœ‰ï¼Œé•è€…è²¡ç”¢å……å…¬çµ¦æˆ‘ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0] },
                { text: "æ¯é€±å¿…é ˆæœ‰ä¸€å¤©æ˜¯ã€èººå¹³æ—¥ã€ï¼Œèª°æ•¢å·¥ä½œå°±æŠ“å»é—œã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0] },
                { text: "å»¢é™¤æ‰€æœ‰æ³•å¾‹ï¼Œè®“æ··äº‚çµ±æ²»ä¸–ç•Œï¼", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }
            ]
        },
        {
            text: "Q10. æœ€å¾Œä¸€é¡Œï¼Œä½ è¦ºå¾—è‡ªå·±æœ€å¤§çš„å„ªé»æ˜¯ï¼Ÿ",
            options: [
                { text: "æˆ‘çš„å‰µæ„ç„¡é™ï¼Œé›–ç„¶å¤§å®¶éƒ½èªªé‚£æ˜¯è®Šæ…‹ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0] },
                { text: "æˆ‘å¾ˆæœƒå¿è€ï¼Œé›–ç„¶æˆ‘å…¶å¯¦åªæ˜¯åœ¨è¨˜ä»‡ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0] },
                { text: "æˆ‘å¾ˆé«˜è²´ï¼Œè·Ÿä½ å€‘é€™äº›å‡¡äººä¸ä¸€æ¨£ã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] },
                { text: "æˆ‘ä¸çŸ¥é“ï¼Œæˆ‘åªæ˜¯ä¸€é¡†éš¨æ³¢é€æµçš„å¡µåŸƒã€‚", 
                  value: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] }
            ]
        }
    ];

    let currentQuestion = 0;
    
    function startQuiz() {
        document.getElementById("start-screen").classList.add("hidden");
        document.getElementById("quiz-screen").classList.remove("hidden");
        loadQuestion();
    }

    function loadQuestion() {
        if (currentQuestion >= questions.length) {
            showResult();
            return;
        }

        const q = questions[currentQuestion];
        document.getElementById("question-text").innerText = q.text;
        const optsDiv = document.getElementById("options-container");
        optsDiv.innerHTML = "";
        
        document.getElementById("progress").style.width = ((currentQuestion / questions.length) * 100) + "%";

        q.options.forEach(opt => {
            const btn = document.createElement("button");
            btn.className = "btn";
            btn.innerText = opt.text;
            btn.onclick = () => {
                const weights = opt.value;
                characterNames.forEach((name, index) => {
                    if (userWeights[name] !== undefined) {
                        userWeights[name] += weights[index];
                    }
                });
                currentQuestion++;
                loadQuestion();
            };
            optsDiv.appendChild(btn);
        });
    }

    function getDriveImage(url) {
        return url; 
    }

    function showResult() {
        document.getElementById("quiz-screen").classList.add("hidden");
        document.getElementById("result-screen").classList.remove("hidden");

        let maxScore = -1;
        let winningCharName = null;

        for (const name in userWeights) {
            if (userWeights[name] > maxScore) {
                maxScore = userWeights[name];
            }
        }
        
        for (const name of characterNames) {
            if (userWeights[name] === maxScore) {
                winningCharName = name; 
                break;
            }
        }

        const bestChar = characters.find(char => char.name === winningCharName);

        if (!bestChar) {
             document.getElementById("result-name").innerText = "éŒ¯èª¤";
             document.getElementById("result-desc").innerText = "è§’è‰²è³‡æ–™éºå¤±æˆ–è¨ˆç¥¨éŒ¯èª¤";
             document.getElementById("result-image").src = "https://via.placeholder.com/200?text=Error";
             return;
        }

        document.getElementById("result-name").innerText = bestChar.name;
        document.getElementById("result-desc").innerText = bestChar.desc;
        document.getElementById("result-image").src = getDriveImage(bestChar.image);
    }

    function generateImage() {
        const captureElement = document.getElementById("capture-area");
        html2canvas(captureElement, {
            useCORS: false, 
            scale: 2,
            backgroundColor: "#ffffff" 
        }).then(canvas => {
            const imgData = canvas.toDataURL("image/png");
            const modal = document.getElementById("generated-image-container");
            const finalImg = document.getElementById("final-image");
            finalImg.src = imgData;
            modal.style.display = "flex";
        });
    }

    function closeImageModal() {
        document.getElementById("generated-image-container").style.display = "none";
    }
</script>

</body>
</html>
